# Polymarket BTC Monitor

A Python-based tool to monitor **Polymarket's 15-minute Bitcoin (BTC) Up/Down prediction markets**. Features real-time data logging and an interactive dashboard for analyzing market behavior and identifying potential opportunities.

## Features

### Data Collection
- **Automated Market Detection**: Automatically finds the currently active 15-minute BTC market
- **Real-time Data Logging**: Continuously fetches and logs market data.
- **CSV Storage**: Historical data stored in `market_data.csv` for analysis, with optional daily rotation.

### Interactive Dashboard
- **Live Auto-Refresh**: Automatically updates periodically (every second) to ensure the latest data is displayed.
- **Advanced Visualization**:
  - Probability trends for Up/Down contracts
  - Market transition indicators (vertical lines)
  - Data point markers for clarity
  - Gaps for zero/missing values
- **Interactive Controls**:
  - Manual refresh button
  - Auto-refresh toggle
  - "Reset Zoom" - view all historical data
  - "Zoom Last 15m" - focus on recent activity (follows new data)
  - Scroll zoom and range slider

### Backtester
A script (`backtester.py`) that simulates the execution of a trading strategy on historical Polymarket data.

#### Strategy
The backtester starts with an `INITIAL_CAPITAL` of $1000. It buys a fixed `SHARE_SIZE` of 100 shares for either the 'Up' or 'Down' side as soon as its price exceeds a `BUY_THRESHOLD` of $0.85. The position is held until the market's expiration.

#### Winning Condition
A direction (Up or Down) is considered to have "won" if its own price is exactly $0 at the last available data point before the market's expiration date. Each share of the winning side pays out $1. If neither side's price reaches exactly $0, the trade is considered a loss for the position held.

#### Configuration
The backtester's behavior can be easily adjusted by modifying the following global variables at the beginning of `backtester.py`:
- `INITIAL_CAPITAL`: The starting capital for the simulation (default: $1000.0).
- `SHARE_SIZE`: The number of shares to buy in each trade (default: 100).
- `BUY_THRESHOLD`: The price point (e.g., 0.85) at which the strategy initiates a buy order for a side.


#### How to Run Data fetcher and Dashboard

**Step 1: Start the Data Logger**
Open a terminal and run:
```bash
python data_logger.py
```
This will continuously fetch market data every 10 seconds and save it to `market_data.csv`.

**Step 2: Launch the Dashboard**
Open a **new** terminal and run:
```bash
python -m streamlit run dashboard.py
```
The dashboard will open in your browser at `http://localhost:8501`.

#### How to Run backtester

Ensure `market_data.csv` contains historical data (generated by running `data_logger.py` for a sufficient period). Then, execute the backtester:
```bash
python backtester.py
```
The script will output a report including final capital, total PnL, and the number of winning and losing trades.

### Dashboard Tips
- Enable **Auto-refresh** to see updates in real-time as data is logged
- Use **Zoom Last 15m** to track the most recent market activity
- Hover over the charts to see exact values with the unified crosshair
- The charts are linked - zooming one automatically zooms the other

## How It Works

The system identifies the **Active Market** by finding the 15-minute interval that has started but not yet expired:

- **Start Time**: Beginning of the 15-minute candle
- **Expiration**: End of the 15-minute candle  
- **Contract Prices**: Live "Yes" (Up) and "No" (Down) prices from Polymarket's CLOB

Contracts pay out based on whether the price at **Expiration** is higher ("Up") or lower ("Down") than the **Strike Price**.

## Project Structure

```
PolymarketAnalyst/
├── backtester.py                 # Script to backtest trading strategies
├── dashboard.py                  # Streamlit dashboard application
├── data_logger.py               # Background data collection service
├── fetch_current_polymarket.py  # Core market data fetching logic
├── find_new_market.py           # Script to find new markets
├── get_current_markets.py       # Script to get current markets
├── .gitignore                   # Specifies intentionally untracked files to ignore
├── README.md                    # This file
└── market_data.csv              # Historical data (auto-generated and used by dashboard)
```

## Contributing

Contributions are welcome! Feel free to open issues or submit pull requests.

## License

MIT License - feel free to use this project for your own analysis and trading strategies.

## Disclaimer

This tool is for informational and educational purposes only. Trading cryptocurrencies and prediction markets involves risk. Always do your own research and never invest more than you can afford to lose.